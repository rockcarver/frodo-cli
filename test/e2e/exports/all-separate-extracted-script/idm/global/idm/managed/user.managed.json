{
  "lastSync": {
    "effectiveAssignmentsProperty": "effectiveAssignments",
    "lastSyncProperty": "lastSync"
  },
  "name": "user",
  "notifications": {
    "property": "_notifications"
  },
  "postDelete": {
    "source": "file://user.managed.scripts/postDelete.script.js",
    "type": "text/javascript"
  },
  "schema": {
    "$schema": "http://json-schema.org/draft-03/schema",
    "icon": "fa-user",
    "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User",
    "mat-icon": "people",
    "order": [
      "_id",
      "userName",
      "password",
      "givenName",
      "sn",
      "mail",
      "description",
      "accountStatus",
      "telephoneNumber",
      "postalAddress",
      "city",
      "postalCode",
      "country",
      "stateProvince",
      "roles",
      "assignments",
      "manager",
      "authzRoles",
      "reports",
      "effectiveRoles",
      "effectiveAssignments",
      "lastSync",
      "kbaInfo",
      "preferences",
      "consentedMappings",
      "ownerOfOrg",
      "adminOfOrg",
      "memberOfOrg",
      "memberOfOrgIDs",
      "activeDate",
      "inactiveDate"
    ],
    "properties": {
      "_id": {
        "description": "User ID",
        "isPersonal": false,
        "policies": [
          {
            "params": {
              "forbiddenChars": [
                "/"
              ]
            },
            "policyId": "cannot-contain-characters"
          }
        ],
        "searchable": false,
        "type": "string",
        "usageDescription": "",
        "userEditable": false,
        "viewable": false
      },
      "accountStatus": {
        "default": "active",
        "description": "Status",
        "isPersonal": false,
        "policies": [
          {
            "params": {
              "regexp": "^(active|inactive)$"
            },
            "policyId": "regexpMatches"
          }
        ],
        "searchable": true,
        "title": "Status",
        "type": "string",
        "usageDescription": "",
        "userEditable": false,
        "viewable": true
      },
      "activeDate": {
        "description": "Active Date",
        "format": "datetime",
        "isPersonal": false,
        "policies": [
          {
            "policyId": "valid-datetime"
          }
        ],
        "searchable": false,
        "title": "Active Date",
        "type": "string",
        "usageDescription": "",
        "userEditable": false,
        "viewable": true
      },
      "adminOfOrg": {
        "items": {
          "notifySelf": false,
          "properties": {
            "_ref": {
              "type": "string"
            },
            "_refProperties": {
              "properties": {
                "_id": {
                  "propName": "_id",
                  "required": false,
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "resourceCollection": [
            {
              "label": "Organization",
              "notify": true,
              "path": "managed/organization",
              "query": {
                "fields": [
                  "name"
                ],
                "queryFilter": "true",
                "sortKeys": []
              }
            }
          ],
          "reversePropertyName": "admins",
          "reverseRelationship": true,
          "type": "relationship",
          "validate": true
        },
        "policies": [],
        "returnByDefault": false,
        "searchable": false,
        "title": "Organizations I Administer",
        "type": "array",
        "userEditable": false,
        "viewable": true
      },
      "assignments": {
        "description": "Assignments",
        "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User:assignments",
        "isPersonal": false,
        "items": {
          "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User:assignments:items",
          "notifySelf": true,
          "properties": {
            "_ref": {
              "description": "References a relationship from a managed object",
              "type": "string"
            },
            "_refProperties": {
              "description": "Supports metadata within the relationship",
              "properties": {
                "_grantType": {
                  "description": "Grant Type",
                  "label": "Grant Type",
                  "type": "string"
                },
                "_id": {
                  "description": "_refProperties object ID",
                  "type": "string"
                }
              },
              "title": "Provisioning Roles Items _refProperties",
              "type": "object"
            }
          },
          "resourceCollection": [
            {
              "conditionalAssociationField": "condition",
              "label": "Assignment",
              "path": "managed/assignment",
              "query": {
                "fields": [
                  "name"
                ],
                "queryFilter": "true"
              }
            }
          ],
          "reversePropertyName": "members",
          "reverseRelationship": true,
          "title": "Assignments Items",
          "type": "relationship",
          "validate": true
        },
        "returnByDefault": false,
        "title": "Assignments",
        "type": "array",
        "usageDescription": "",
        "userEditable": false,
        "viewable": true
      },
      "authzRoles": {
        "description": "Authorization Roles",
        "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User:authzRoles",
        "isPersonal": false,
        "items": {
          "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User:authzRoles:items",
          "properties": {
            "_ref": {
              "description": "References a relationship from a managed object",
              "type": "string"
            },
            "_refProperties": {
              "description": "Supports metadata within the relationship",
              "properties": {
                "_id": {
                  "description": "_refProperties object ID",
                  "type": "string"
                }
              },
              "title": "Authorization Roles Items _refProperties",
              "type": "object"
            }
          },
          "resourceCollection": [
            {
              "conditionalAssociationField": "condition",
              "label": "Internal Role",
              "path": "internal/role",
              "query": {
                "fields": [
                  "name"
                ],
                "queryFilter": "true"
              }
            }
          ],
          "reversePropertyName": "authzMembers",
          "reverseRelationship": true,
          "title": "Authorization Roles Items",
          "type": "relationship",
          "validate": true
        },
        "returnByDefault": false,
        "title": "Authorization Roles",
        "type": "array",
        "usageDescription": "",
        "userEditable": false,
        "viewable": true
      },
      "city": {
        "description": "City",
        "isPersonal": false,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "title": "City",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "consentedMappings": {
        "description": "Consented Mappings",
        "isPersonal": false,
        "isVirtual": false,
        "items": {
          "order": [
            "mapping",
            "consentDate"
          ],
          "properties": {
            "consentDate": {
              "description": "Consent Date",
              "format": "datetime",
              "policies": [
                {
                  "policyId": "valid-datetime"
                }
              ],
              "searchable": true,
              "title": "Consent Date",
              "type": "string",
              "userEditable": true,
              "viewable": true
            },
            "mapping": {
              "description": "Mapping",
              "searchable": true,
              "title": "Mapping",
              "type": "string",
              "userEditable": true,
              "viewable": true
            }
          },
          "required": [
            "mapping",
            "consentDate"
          ],
          "title": "Consented Mapping",
          "type": "object"
        },
        "returnByDefault": false,
        "searchable": false,
        "title": "Consented Mappings",
        "type": "array",
        "usageDescription": "",
        "userEditable": true,
        "viewable": false
      },
      "country": {
        "description": "Country",
        "isPersonal": false,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "title": "Country",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "description": {
        "description": "Description",
        "isPersonal": false,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "searchable": true,
        "title": "Description",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "effectiveAssignments": {
        "description": "Effective Assignments",
        "isPersonal": false,
        "isVirtual": true,
        "items": {
          "title": "Effective Assignments Items",
          "type": "object"
        },
        "queryConfig": {
          "referencedObjectFields": [
            "*"
          ],
          "referencedRelationshipFields": [
            [
              "roles",
              "assignments"
            ],
            [
              "assignments"
            ]
          ]
        },
        "returnByDefault": true,
        "title": "Effective Assignments",
        "type": "array",
        "usageDescription": "",
        "viewable": false
      },
      "effectiveRoles": {
        "description": "Effective Roles",
        "isPersonal": false,
        "isVirtual": true,
        "items": {
          "title": "Effective Roles Items",
          "type": "object"
        },
        "queryConfig": {
          "referencedRelationshipFields": [
            "roles"
          ]
        },
        "returnByDefault": true,
        "title": "Effective Roles",
        "type": "array",
        "usageDescription": "",
        "viewable": false
      },
      "givenName": {
        "description": "First Name",
        "isPersonal": true,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "searchable": true,
        "title": "First Name",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "inactiveDate": {
        "description": "Inactive Date",
        "format": "datetime",
        "isPersonal": false,
        "policies": [
          {
            "policyId": "valid-datetime"
          }
        ],
        "searchable": false,
        "title": "Inactive Date",
        "type": "string",
        "usageDescription": "",
        "userEditable": false,
        "viewable": true
      },
      "kbaInfo": {
        "description": "KBA Info",
        "isPersonal": true,
        "items": {
          "order": [
            "answer",
            "customQuestion",
            "questionId"
          ],
          "properties": {
            "answer": {
              "description": "Answer",
              "type": "string"
            },
            "customQuestion": {
              "description": "Custom question",
              "type": "string"
            },
            "questionId": {
              "description": "Question ID",
              "type": "string"
            }
          },
          "required": [],
          "title": "KBA Info Items",
          "type": "object"
        },
        "type": "array",
        "usageDescription": "",
        "userEditable": true,
        "viewable": false
      },
      "lastSync": {
        "description": "Last Sync timestamp",
        "isPersonal": false,
        "order": [
          "effectiveAssignments",
          "timestamp"
        ],
        "properties": {
          "effectiveAssignments": {
            "description": "Effective Assignments",
            "items": {
              "title": "Effective Assignments Items",
              "type": "object"
            },
            "title": "Effective Assignments",
            "type": "array"
          },
          "timestamp": {
            "description": "Timestamp",
            "policies": [
              {
                "policyId": "valid-datetime"
              }
            ],
            "type": "string"
          }
        },
        "required": [],
        "scope": "private",
        "searchable": false,
        "title": "Last Sync timestamp",
        "type": "object",
        "usageDescription": "",
        "viewable": false
      },
      "mail": {
        "description": "Email Address",
        "isPersonal": true,
        "policies": [
          {
            "policyId": "valid-email-address-format"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "searchable": true,
        "title": "Email Address",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "manager": {
        "description": "Manager",
        "isPersonal": false,
        "properties": {
          "_ref": {
            "description": "References a relationship from a managed object",
            "type": "string"
          },
          "_refProperties": {
            "description": "Supports metadata within the relationship",
            "properties": {
              "_id": {
                "description": "_refProperties object ID",
                "type": "string"
              }
            },
            "title": "Manager _refProperties",
            "type": "object"
          }
        },
        "resourceCollection": [
          {
            "label": "User",
            "path": "managed/user",
            "query": {
              "fields": [
                "userName",
                "givenName",
                "sn"
              ],
              "queryFilter": "true"
            }
          }
        ],
        "reversePropertyName": "reports",
        "reverseRelationship": true,
        "searchable": false,
        "title": "Manager",
        "type": "relationship",
        "usageDescription": "",
        "userEditable": false,
        "validate": true,
        "viewable": true
      },
      "memberOfOrg": {
        "items": {
          "notifySelf": true,
          "properties": {
            "_ref": {
              "type": "string"
            },
            "_refProperties": {
              "properties": {
                "_id": {
                  "propName": "_id",
                  "required": false,
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "resourceCollection": [
            {
              "label": "Organization",
              "notify": false,
              "path": "managed/organization",
              "query": {
                "fields": [
                  "name"
                ],
                "queryFilter": "true",
                "sortKeys": []
              }
            }
          ],
          "reversePropertyName": "members",
          "reverseRelationship": true,
          "type": "relationship",
          "validate": true
        },
        "policies": [],
        "returnByDefault": false,
        "searchable": false,
        "title": "Organizations to which I Belong",
        "type": "array",
        "userEditable": false,
        "viewable": true
      },
      "memberOfOrgIDs": {
        "isVirtual": true,
        "items": {
          "title": "org identifiers",
          "type": "string"
        },
        "queryConfig": {
          "flattenProperties": true,
          "referencedObjectFields": [
            "_id",
            "parentIDs"
          ],
          "referencedRelationshipFields": [
            "memberOfOrg"
          ]
        },
        "returnByDefault": true,
        "searchable": false,
        "title": "MemberOfOrgIDs",
        "type": "array",
        "userEditable": false,
        "viewable": false
      },
      "ownerOfOrg": {
        "items": {
          "notifySelf": false,
          "properties": {
            "_ref": {
              "type": "string"
            },
            "_refProperties": {
              "properties": {
                "_id": {
                  "propName": "_id",
                  "required": false,
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "resourceCollection": [
            {
              "label": "Organization",
              "notify": true,
              "path": "managed/organization",
              "query": {
                "fields": [
                  "name"
                ],
                "queryFilter": "true",
                "sortKeys": []
              }
            }
          ],
          "reversePropertyName": "owners",
          "reverseRelationship": true,
          "type": "relationship",
          "validate": true
        },
        "policies": [],
        "returnByDefault": false,
        "searchable": false,
        "title": "Organizations I Own",
        "type": "array",
        "userEditable": false,
        "viewable": true
      },
      "password": {
        "description": "Password",
        "encryption": {
          "purpose": "idm.password.encryption"
        },
        "isPersonal": false,
        "isProtected": true,
        "policies": [
          {
            "params": {
              "minLength": 8
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "numCaps": 1
            },
            "policyId": "at-least-X-capitals"
          },
          {
            "params": {
              "numNums": 1
            },
            "policyId": "at-least-X-numbers"
          },
          {
            "params": {
              "disallowedFields": [
                "userName",
                "givenName",
                "sn"
              ]
            },
            "policyId": "cannot-contain-others"
          }
        ],
        "scope": "private",
        "searchable": false,
        "title": "Password",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": false
      },
      "postalAddress": {
        "description": "Address 1",
        "isPersonal": true,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "title": "Address 1",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "postalCode": {
        "description": "Postal Code",
        "isPersonal": false,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "title": "Postal Code",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "preferences": {
        "description": "Preferences",
        "isPersonal": false,
        "order": [
          "updates",
          "marketing"
        ],
        "properties": {
          "marketing": {
            "description": "Send me special offers and services",
            "type": "boolean"
          },
          "updates": {
            "description": "Send me news and updates",
            "type": "boolean"
          }
        },
        "required": [],
        "searchable": false,
        "title": "Preferences",
        "type": "object",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "reports": {
        "description": "Direct Reports",
        "isPersonal": false,
        "items": {
          "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User:reports:items",
          "properties": {
            "_ref": {
              "description": "References a relationship from a managed object",
              "type": "string"
            },
            "_refProperties": {
              "description": "Supports metadata within the relationship",
              "properties": {
                "_id": {
                  "description": "_refProperties object ID",
                  "type": "string"
                }
              },
              "title": "Direct Reports Items _refProperties",
              "type": "object"
            }
          },
          "resourceCollection": [
            {
              "label": "User",
              "path": "managed/user",
              "query": {
                "fields": [
                  "userName",
                  "givenName",
                  "sn"
                ],
                "queryFilter": "true"
              }
            }
          ],
          "reversePropertyName": "manager",
          "reverseRelationship": true,
          "title": "Direct Reports Items",
          "type": "relationship",
          "validate": true
        },
        "returnByDefault": false,
        "title": "Direct Reports",
        "type": "array",
        "usageDescription": "",
        "userEditable": false,
        "viewable": true
      },
      "roles": {
        "description": "Provisioning Roles",
        "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User:roles",
        "isPersonal": false,
        "items": {
          "id": "urn:jsonschema:org:forgerock:openidm:managed:api:User:roles:items",
          "notifySelf": true,
          "properties": {
            "_ref": {
              "description": "References a relationship from a managed object",
              "type": "string"
            },
            "_refProperties": {
              "description": "Supports metadata within the relationship",
              "properties": {
                "_grantType": {
                  "description": "Grant Type",
                  "label": "Grant Type",
                  "type": "string"
                },
                "_id": {
                  "description": "_refProperties object ID",
                  "type": "string"
                }
              },
              "title": "Provisioning Roles Items _refProperties",
              "type": "object"
            }
          },
          "resourceCollection": [
            {
              "conditionalAssociationField": "condition",
              "label": "Role",
              "path": "managed/role",
              "query": {
                "fields": [
                  "name"
                ],
                "queryFilter": "true"
              }
            }
          ],
          "reversePropertyName": "members",
          "reverseRelationship": true,
          "title": "Provisioning Roles Items",
          "type": "relationship",
          "validate": true
        },
        "relationshipGrantTemporalConstraintsEnforced": true,
        "returnByDefault": false,
        "title": "Provisioning Roles",
        "type": "array",
        "usageDescription": "",
        "userEditable": false,
        "viewable": true
      },
      "sn": {
        "description": "Last Name",
        "isPersonal": true,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "searchable": true,
        "title": "Last Name",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "stateProvince": {
        "description": "State/Province",
        "isPersonal": false,
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "title": "State/Province",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "telephoneNumber": {
        "description": "Telephone Number",
        "isPersonal": true,
        "pattern": "^\\+?([0-9\\- \\(\\)])*$",
        "policies": [
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "title": "Telephone Number",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      },
      "userName": {
        "description": "Username",
        "isPersonal": true,
        "policies": [
          {
            "policyId": "valid-username"
          },
          {
            "params": {
              "forbiddenChars": [
                "/"
              ]
            },
            "policyId": "cannot-contain-characters"
          },
          {
            "params": {
              "minLength": 1
            },
            "policyId": "minimum-length"
          },
          {
            "params": {
              "maxLength": 255
            },
            "policyId": "maximum-length"
          }
        ],
        "searchable": true,
        "title": "Username",
        "type": "string",
        "usageDescription": "",
        "userEditable": true,
        "viewable": true
      }
    },
    "required": [
      "userName",
      "givenName",
      "sn",
      "mail"
    ],
    "title": "User",
    "type": "object",
    "viewable": true
  }
}
